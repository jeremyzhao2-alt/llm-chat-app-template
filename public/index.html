<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Workers AI</title>
		<style>
			:root {
				/* 深蓝色主题色 */
				--primary-color: #1d4ed8;
				--primary-hover: #1e40af;
				/* 背景渐变加深 */
				--bg-gradient: radial-gradient(circle at top right, #172554, #020617, #000000);
				/* 毛玻璃效果背景 */
				--glass-bg: rgba(15, 23, 42, 0.4);
				--glass-border: rgba(255, 255, 255, 0.1);
				--text-color: #f8fafc;
				--text-light: #94a3b8;
				--user-msg-bg: rgba(29, 78, 216, 0.6);
				--assistant-msg-bg: rgba(30, 41, 59, 0.5);
				--input-bg: rgba(0, 0, 0, 0.4);
			}

			/* 浅色模式适配 - 彻底纯白风格 */
			@media (prefers-color-scheme: light) {
				:root {
					--bg-gradient: #ffffff; /* 页面背景改为纯白 */
					--glass-bg: #ffffff; /* 聊天框改为纯白 */
					--glass-border: #ffffff; /* 容器边框改为纯白 */
					--text-color: #0f172a;
					--text-light: #64748b;
					--user-msg-bg: #1d4ed8;
					--assistant-msg-bg: #f8fafc; /* AI 气泡保持极浅灰色以区分 */
					--input-bg: #ffffff; /* 输入框改为纯白 */
				}
				.user-message p { color: #ffffff; }
				.chat-container {
					border: 1px solid #f1f5f9; /* 使用极浅的灰色代替纯白边框，防止视觉消失 */
					box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03); /* 极弱的投影 */
				}
				.message-input {
					background: #ffffff;
					border-top: 1px solid #f1f5f9; /* 内部分割线设为极浅色 */
				}
				#user-input {
					border: 1px solid #f1f5f9; /* 输入框边框 */
				}
				.assistant-message {
					border: 1px solid #f1f5f9; /* AI 消息气泡边框 */
				}
			}

			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}

			/* 深度清除所有输入控件装饰器 */
			textarea, input {
				-webkit-appearance: none !important;
				-moz-appearance: none !important;
				appearance: none !important;
			}

			/* 针对 Chrome/Safari/Edge 的计数器和手柄清除 */
			::-webkit-resizer,
			::-webkit-inner-spin-button,
			::-webkit-outer-spin-button {
				display: none !important;
				-webkit-appearance: none !important;
				margin: 0 !important;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
				line-height: 1.4;
				color: var(--text-color);
				background: var(--bg-gradient);
				background-attachment: fixed;
				max-width: 900px;
				margin: 0 auto;
				padding: 1rem;
				height: 100vh;
				display: flex;
				flex-direction: column;
			}

			header {
				text-align: center;
				margin-bottom: 1rem;
				padding: 0.5rem 0;
			}

			h1 {
				font-size: 1.8rem;
				color: #3b82f6;
				font-weight: 700;
				letter-spacing: -0.025em;
				text-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
			}

			@media (prefers-color-scheme: light) {
				h1 { text-shadow: none; } /* 浅色模式去掉文字阴影 */
			}

			header p {
				color: var(--text-light);
				font-size: 0.9rem;
			}

			.chat-container {
				display: flex;
				flex-direction: column;
				flex: 1;
				background: var(--glass-bg);
				backdrop-filter: blur(30px) saturate(150%);
				-webkit-backdrop-filter: blur(30px) saturate(150%);
				border: 1px solid var(--glass-border);
				border-radius: 24px;
				overflow: hidden;
				box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
			}

			.chat-messages {
				flex: 1;
				overflow-y: auto;
				padding: 1.2rem;
				display: flex;
				flex-direction: column;
				gap: 0.8rem;
			}

			.message {
				padding: 0.7rem 1.1rem;
				border-radius: 18px;
				max-width: 85%;
				position: relative;
			}

			.message p {
				white-space: pre-wrap;
				margin: 0;
				overflow-wrap: anywhere;
				font-size: 0.95rem;
			}

			.user-message {
				background-color: var(--user-msg-bg);
				align-self: flex-end;
				border-bottom-right-radius: 4px;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.assistant-message {
				background-color: var(--assistant-msg-bg);
				align-self: flex-start;
				border-bottom-left-radius: 4px;
				border: 1px solid var(--glass-border);
			}

			.message-input {
				display: flex;
				align-items: center;
				padding: 1.2rem;
				gap: 0.8rem;
				background: rgba(0, 0, 0, 0.25);
				border-top: 1px solid var(--glass-border);
			}

			#user-input {
				flex: 1;
				padding: 0.75rem 1.1rem;
				background-color: var(--input-bg);
				border: 1px solid var(--glass-border);
				border-radius: 16px;
				color: var(--text-color);
				font-family: inherit;
				resize: none !important;
				min-height: 44px;
				max-height: 150px;
				outline: none;
				transition: all 0.2s;
				overflow: hidden;
			}

			#user-input:focus {
				border-color: var(--primary-color);
				background-color: rgba(0, 0, 0, 0.05);
			}

			#send-button {
				width: 44px;
				height: 44px;
				background-color: var(--primary-color);
				color: white;
				border: none;
				border-radius: 14px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
				flex-shrink: 0;
			}

			#send-button::before {
				content: '';
				width: 20px;
				height: 20px;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='22' y1='2' x2='11' y2='13'%3E%3C/line%3E%3Cpolygon points='22 2 15 22 11 13 2 9 22 2'%3E%3C/polygon%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: center;
			}

			#send-button:hover {
				background-color: var(--primary-hover);
				transform: scale(1.05);
			}

			#send-button:disabled {
				background-color: var(--text-light);
				opacity: 0.3;
				cursor: not-allowed;
			}

			.typing-indicator {
				display: none;
				font-size: 0.8rem;
				font-style: italic;
				color: var(--text-light);
				padding: 0.4rem 1.2rem;
			}

			.typing-indicator.visible {
				display: block;
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Cloudflare AI 助手</h1>
			<p>基于 Cloudflare Workers AI 构建</p>
		</header>

		<div class="chat-container">
			<div id="chat-messages" class="chat-messages">
				<!-- 恢复初始欢迎消息 -->
				<div class="message assistant-message">
					<p>你好！我是基于 Cloudflare Workers AI 的聊天应用。今天有什么我可以帮你的吗？</p>
				</div>
			</div>

			<div class="typing-indicator" id="typing-indicator">
				AI 正在思考中...
			</div>

			<div class="message-input">
				<textarea
					id="user-input"
					placeholder="输入消息并按 Enter 发送..."
					rows="1"
					autofocus
				></textarea>
				<button id="send-button" title="发送"></button>
			</div>
		</div>

		<!-- 引入逻辑脚本 -->
		<script src="chat.js"></script>
	</body>
</html>
